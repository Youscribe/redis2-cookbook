#
# Chef Client Config File
#
# Dynamically generated by Chef - local modifications will be replaced
#

log_level          :info
log_location       <%= node.chef.attribute?(:log_dir) ? "\"#{::File.join(node[:chef][:log_dir], "client.log")}\"" : "STDOUT" %>
ssl_verify_mode    :verify_none
chef_server_url    "<%= node[:chef][:server_url] %>"

validation_client_name "<%= node[:chef][:validation_client_name] %>"
validation_key      	 "/etc/chef/validation.pem"
client_key          	 "/etc/chef/client.pem"

<% if node[:chef][:backup_path] -%>
file_backup_path   "<%= node[:chef][:backup_path] %>"
<% else -%>
file_backup_path   nil
<% end -%>
file_cache_path    "<%= node[:chef][:cache_path] %>"
pid_file           "<%= node[:chef][:run_path] %>/client.pid"
<% unless @chef_node_name.nil? -%>
node_name          "<%= @chef_node_name %>"
<% else -%>
# Using default node name"
<% end -%>

if ::File.exist? '/etc/chef/nagios_handler.rb'
  require '/etc/chef/nagios_handler.rb'
  nagios_handler = ::FewBytes::Chef::NagiosHandler.new("chef-client run status")
  report_handlers << nagios_handler
  exception_handlers << nagios_handler
end
